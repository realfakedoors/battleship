(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(1),r=n.n(c),s=n(7),o=n.n(s),i=(n(13),n(14),n(4)),u=n(2),l=function(t){var e=t.player,n=t.length,c=t.type,r=t.column,s=t.row,o=t.orientation,i=t.shipName,u=function(){return"ABCDEFGHIJ".split("").findIndex((function(t){return t===r}))+1},l={gridColumn:"".concat(u()," / ").concat(u()),gridRow:"".concat(s," / span ").concat(n)},d={gridColumn:"".concat(u()," / span ").concat(n),gridRow:"".concat(s," / ").concat(s)};return Object(a.jsx)("div",{className:"ship "+c,"data-testid":c+e,style:"vertical"===o?l:d,children:Object(a.jsx)("p",{style:"vertical"===o?{transform:"rotate(-90deg)"}:null,children:i(c)})})},d=function(t){t.contents;var e=t.column,n=t.row,c=t.boardNumber,r=t.attemptAttack,s=t.attackResult,o={gridColumn:"".concat("ABCDEFGHIJ".split("").findIndex((function(t){return t===e}))+1," / span 1"),gridRow:"".concat(n," / span 1")};return Object(a.jsx)("div",{className:"square","data-testid":c+e+n,style:o,onClick:function(){return r(c,e,n)},children:function(t){if(t){var e="/battleship/icons/"+t+".svg";return Object(a.jsx)("img",{src:e,alt:t,className:"attack-result"})}}(s)})},p=function(t){var e=t.boardNumber,n=t.playerName,c=t.boardState,r=t.sunkenShips,s=t.showShips,o=t.attemptAttack;function u(t){return t.replace(/-/," ").split(" ").map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(" ")}var p="ABCDEFGHIJ".split(""),m=Object(i.a)(Array(10).keys()).map((function(t){return t+1}));return Object(a.jsxs)("div",{className:"board-container",children:[Object(a.jsx)("div",{className:"player-name",children:n}),Object(a.jsx)("div",{className:"display-columns",children:p.map((function(t){return Object(a.jsx)("p",{className:"display-column",children:t},t+e)}))}),Object(a.jsx)("div",{className:"display-rows",children:m.map((function(t){return Object(a.jsx)("p",{className:"display-row",children:t},t+e)}))}),Object(a.jsxs)("div",{className:"board","data-testid":"board-"+e,children:[c.squares.map((function(t){return Object(a.jsx)(d,{contents:t.contents,attackResult:t.attackResult,column:t.column,row:t.row,boardNumber:e,attemptAttack:o},t.column+t.row)})),c.ships.map((function(t){if(s)return Object(a.jsx)(l,{player:e,type:t.type,shipName:u,length:t.length,column:t.column,row:t.row,orientation:t.orientation},t.type+e)}))]}),Object(a.jsxs)("div",{className:"display-sunken-ships",children:[Object(a.jsx)("span",{className:"sunk-text",children:r.length>0&&"Sunk:"}),r.map((function(t){return Object(a.jsx)("div",{className:"sunken-ship "+t,children:u(t)},n+t)}))]})]})},m=function(t){var e=t.displayIcon,n=t.displayText,c=t.buttonText,r=t.buttonAction;return Object(a.jsxs)("div",{className:"dialog",children:[e&&Object(a.jsx)("img",{src:e,alt:"display-icon",className:"dialog-display-icon"}),Object(a.jsx)("p",{className:"dialog-text",children:n}),Object(a.jsx)("button",{className:"button",onClick:function(){r()},children:c})]})},b=[{type:"carrier",length:5},{type:"battleship",length:4},{type:"destroyer",length:3},{type:"submarine",length:3},{type:"patrol-boat",length:2}],h=function(){var t,e=Object(c.useState)(U(1)),n=Object(u.a)(e,2),r=n[0],s=n[1],o=Object(c.useState)(U(2)),l=Object(u.a)(o,2),d=l[0],h=l[1],j=Object(c.useState)("Player1"),f=Object(u.a)(j,2),y=f[0],O=f[1],v=Object(c.useState)("Player2"),x=Object(u.a)(v,2),N=x[0],g=x[1],k=Object(c.useState)(1),w=Object(u.a)(k,2),S=w[0],A=w[1],E=Object(c.useState)(null),I=Object(u.a)(E,2),C=I[0],R=I[1],q=Object(c.useState)("New Game"),G=Object(u.a)(q,2),M=G[0],B=G[1];function J(t,e){t.length===b.length&&B("Victory")}function T(t){var e=[];return b.map((function(t){return t.type})).forEach((function(n){t.squares.filter((function(t){return t.contents[0]===n})).every((function(t){return"hit"===t.attackResult}))&&e.push(n)})),e}function D(t,e,n,a){return{type:t.type,length:t.length,column:function(t){return t.map((function(t){return t[0]})).sort()[0]}(e),row:function(t){return Math.min.apply(Math,Object(i.a)(t.map((function(t){return t[1]}))))}(e),orientation:n,sunk:!1}}function F(t){return S===t}function H(t,e,n,a,c){for(var r=[],s=0;s<t;s++){var o=void 0,i=void 0;"horizontal"===e?(i=a,o=n+s>9?c[n-(t-s)]:c[n+s]):"vertical"===e&&(o=c[n],i=a+s>10?a-(t-s):a+s),r.push([o,i])}return r}function P(t,e){return t.squares.filter((function(t){return t.column===e[0]&&t.row===e[1]}))[0]}function z(t,e){return 0===P(t,e).contents.length}function V(t,e){return null===P(t,e).attackResult}function U(t){var e="ABCDEFGHIJ".split(""),n=Object(i.a)(Array(10).keys()).map((function(t){return t+1})),a=function(t,e){var n={squares:[],ships:[]};return e.forEach((function(e){t.forEach((function(t){var a={column:t,row:e,contents:[],attackResult:null};n.squares.push(a)}))})),n}(e,n);return b.forEach((function(t){for(var n=!1;!0!==n;){var c=Math.floor(10*Math.random()),r=Math.floor(10*Math.random())+1,s=void 0;s=0===Math.floor(2*Math.random())?"vertical":"horizontal";var o=H(t.length,s,c,r,e);o.every((function(t){return z(a,t)}))&&(o.forEach((function(e){e={column:e[0],row:e[1]};var n=a.squares.findIndex((function(t){return t.column===e.column&&t.row===e.row}));a.squares[n].contents=[t.type]})),a.ships.push(D(t,o,s)),n=!0)}})),a}function W(t,e,n){P(t,e).attackResult=n,1===S?(h(t),A(2)):2===S&&(s(t),A(1)),R({result:n,square:e[0]+e[1]}),B("Swap")}function Y(t,e,n){var a=[e,n];1===t&&2===S&&V(r,a)?z(r,a)?W(r,a,"miss"):W(r,a,"hit"):2===t&&1===S&&V(d,a)&&(z(d,a)?W(d,a,"miss"):W(d,a,"hit"))}switch(Object(c.useEffect)((function(){J(T(r),y),J(T(d),N)}),[S]),M){case"New Game":t=Object(a.jsxs)("div",{className:"new-game",children:[Object(a.jsxs)("p",{className:"new-game-text",children:["Welcome to Battleship!",Object(a.jsx)("br",{}),"Enter your names:"]}),Object(a.jsxs)("div",{className:"username-fields",children:[Object(a.jsx)("input",{type:"text",placeholder:y,id:"name1-field",className:"username-field"}),Object(a.jsx)("input",{type:"text",placeholder:N,id:"name2-field",className:"username-field"})]}),Object(a.jsx)("button",{className:"button",onClick:function(){O(document.getElementById("name1-field").value||y),g(document.getElementById("name2-field").value||N),B("Swap")},children:"Start Game"})]});break;case"Swap":var K,L,Q,X="";1===S?(K=y,L=N):2===S&&(K=N,L=y),(null===C||void 0===C?void 0:C.result)&&(X="".concat(L," attacked ").concat(C.square,", it's a ").concat(C.result,"! "),Q="/battleship/icons/"+C.result+".svg"),t=Object(a.jsx)(m,{displayIcon:Q,displayText:X+"Good luck, ".concat(K,"! It's your turn."),buttonText:"Ready!",buttonAction:function(){B("Gameplay")}});break;case"Victory":var Z;Z=1===S?y:N,t=Object(a.jsx)(m,{displayText:"Awesome job, ".concat(Z,"! You won!"),buttonText:"Play Again?",buttonAction:function(){B("New Game")}});break;default:t=1===S?Object(a.jsxs)("div",{children:[Object(a.jsx)(p,{boardNumber:2,playerName:N,boardState:d,sunkenShips:T(d),showShips:F(2),attemptAttack:Y}),Object(a.jsx)(p,{boardNumber:1,playerName:y,boardState:r,sunkenShips:T(r),showShips:F(1),attemptAttack:Y})]}):2===S?Object(a.jsxs)("div",{children:[Object(a.jsx)(p,{boardNumber:1,playerName:y,boardState:r,sunkenShips:T(r),showShips:F(1),attemptAttack:Y}),Object(a.jsx)(p,{boardNumber:2,playerName:N,boardState:d,sunkenShips:T(d),showShips:F(2),attemptAttack:Y})]}):void 0}return Object(a.jsx)("div",{className:"game","data-testid":"game",children:t})};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(h,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2100db32.chunk.js.map